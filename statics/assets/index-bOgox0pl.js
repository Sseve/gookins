import{k as f,r as v,l as C,E as w,c as x,a,w as l,m as h,d as g,b as n,o as b,e as _,p as D,n as A,h as q,q as B}from"./index-y1BZ-Toa.js";import{g as N,a as z}from"./user-BMYIhBX-.js";import"./request-Sx4CXzmN.js";const F={class:"dialog-footer"},j={__name:"index",setup(I){const p=f([]);p.value.length;const i=f(!1),d=f(!1),s=v({name:"",password:"",checkPass:""}),V=v({name:[{required:!0,validator:(t,e,o)=>{e===""?o(new Error("请输入用户")):o()},trigger:"blur"}],password:[{required:!0,validator:(t,e,o)=>{e===""?o(new Error("密码必须大于6位")):o()},trigger:"blur"}],checkPass:[{required:!0,validator:(t,e,o)=>{e===""?o(new Error("密码必须大于6位")):e!==s.password?o(new Error("两次密码不一致")):o()},trigger:"change"}]}),y=async()=>{i.value=!0;try{const t=v({name:s.name,password:s.password}),e=await z(t);e.code==200&&w({message:e.message||"Add User Success",type:"success",duration:5*1e3}),s.name="",s.password="",s.checkPass="",i.value=!1}catch(t){w({message:t||"Add User Error",type:"error",duration:5*1e3}),i.value=!1}d.value=!1};return C(async()=>{try{const t=await N();p.value=t.data}catch(t){w({message:t||"Get Users Error",type:"error",duration:5*1e3})}}),(t,e)=>{const o=n("el-button"),m=n("el-input"),c=n("el-form-item"),U=n("el-form"),k=n("el-dialog"),u=n("el-table-column"),P=n("el-table"),E=B("loading");return b(),x("div",null,[a(o,{plain:"",onClick:e[0]||(e[0]=r=>d.value=!0),type:"primary",icon:h(D),size:"small"},{default:l(()=>e[6]||(e[6]=[_(" 新增用户 ")])),_:1},8,["icon"]),e[9]||(e[9]=g("hr",{class:"my-4"},null,-1)),a(k,{modelValue:d.value,"onUpdate:modelValue":e[5]||(e[5]=r=>d.value=r),width:"500",center:""},{footer:l(()=>[g("div",F,[a(o,{onClick:e[4]||(e[4]=r=>d.value=!1),size:"small"},{default:l(()=>e[7]||(e[7]=[_("取消")])),_:1}),a(o,{type:"primary",onClick:y,size:"small"},{default:l(()=>e[8]||(e[8]=[_(" 提交 ")])),_:1})])]),default:l(()=>[A((b(),q(U,{style:{"max-width":"600px"},model:s,"status-icon":"",rules:V,"label-width":"auto"},{default:l(()=>[a(c,{label:"用户名称",prop:"name"},{default:l(()=>[a(m,{modelValue:s.name,"onUpdate:modelValue":e[1]||(e[1]=r=>s.name=r)},null,8,["modelValue"])]),_:1}),a(c,{label:"用户密码",prop:"password"},{default:l(()=>[a(m,{modelValue:s.password,"onUpdate:modelValue":e[2]||(e[2]=r=>s.password=r),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(c,{label:"确认密码",prop:"checkPass"},{default:l(()=>[a(m,{modelValue:s.checkPass,"onUpdate:modelValue":e[3]||(e[3]=r=>s.checkPass=r),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[E,i.value]])]),_:1},8,["modelValue"]),a(P,{data:p.value},{default:l(()=>[a(u,{prop:"ID",label:"ID",width:"100"}),a(u,{prop:"Name",label:"姓名",width:"150"}),a(u,{prop:"CreatedAt",label:"创建时间",width:"360"}),a(u,{prop:"UpdatedAt",label:"更新时间",width:"360"}),a(u,{prop:"DeletedAt",label:"删除时间",width:"360"})]),_:1},8,["data"])])}}};export{j as default};
